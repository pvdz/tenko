# Tenko parser test case

- Path: tests/testcases/functions/yield_await/generator/body/class_method/async_class_method_await.md

> :: functions : yield await : generator : body : class method
>
> ::> async class method await
>
> barring exceptions -- for all functions and methods goes:
>
> - name of the func keeps outer scope await/yield state. exception: function expressions clear it.
> - args and body explicitly set it according to the type of this function (so async sets await clears yield, etc)
>
> This means you can use `await` as a function name as long as you are not in strict mode and not already inside an async function and it's okay if the function whose name is being defined is actually async itself.
>
> the cases to test are a cross product of:
>
> - `<global, inside async, inside generator>` 
> - `x` 
> - `<yield, await>`
> - `x` 
> - `<regular, async, generator, async gen>`
> - `x` 
> - `<name, arg-name, arg-default, body>`
> - `x`
> - `<class method, obj method, decl, expr, default>`

## Input

`````js
function *as(){ class A {async f() { return await foo; }} }
`````

## Output

_Note: the whole output block is auto-generated. Manual changes will be overwritten!_

Below follow outputs in five parsing modes: sloppy, sloppy+annexb, strict script, module, module+annexb.

Note that the output parts are auto-generated by the test runner to reflect actual result.

### Sloppy mode

Parsed with script goal and as if the code did not start with strict mode header.

`````
ast: {
  type: 'Program',
  loc:{start:{line:1,column:0},end:{line:1,column:59},source:''},
  body: [
    {
      type: 'FunctionDeclaration',
      loc:{start:{line:1,column:0},end:{line:1,column:59},source:''},
      generator: true,
      async: false,
      id: {
        type: 'Identifier',
        loc:{start:{line:1,column:10},end:{line:1,column:12},source:''},
        name: 'as'
      },
      params: [],
      body: {
        type: 'BlockStatement',
        loc:{start:{line:1,column:14},end:{line:1,column:59},source:''},
        body: [
          {
            type: 'ClassDeclaration',
            loc:{start:{line:1,column:16},end:{line:1,column:57},source:''},
            id: {
              type: 'Identifier',
              loc:{start:{line:1,column:22},end:{line:1,column:23},source:''},
              name: 'A'
            },
            superClass: null,
            body: {
              type: 'ClassBody',
              loc:{start:{line:1,column:24},end:{line:1,column:57},source:''},
              body: [
                {
                  type: 'MethodDefinition',
                  loc:{start:{line:1,column:25},end:{line:1,column:56},source:''},
                  key: {
                    type: 'Identifier',
                    loc:{start:{line:1,column:31},end:{line:1,column:32},source:''},
                    name: 'f'
                  },
                  static: false,
                  computed: false,
                  kind: 'method',
                  value: {
                    type: 'FunctionExpression',
                    loc:{start:{line:1,column:25},end:{line:1,column:56},source:''},
                    generator: false,
                    async: true,
                    id: null,
                    params: [],
                    body: {
                      type: 'BlockStatement',
                      loc:{start:{line:1,column:35},end:{line:1,column:56},source:''},
                      body: [
                        {
                          type: 'ReturnStatement',
                          loc:{start:{line:1,column:37},end:{line:1,column:54},source:''},
                          argument: {
                            type: 'AwaitExpression',
                            loc:{start:{line:1,column:44},end:{line:1,column:53},source:''},
                            argument: {
                              type: 'Identifier',
                              loc:{start:{line:1,column:50},end:{line:1,column:53},source:''},
                              name: 'foo'
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ]
}

tokens (22x):
       ID_function PUNC_STAR ID_as PUNC_PAREN_OPEN PUNC_PAREN_CLOSE
       PUNC_CURLY_OPEN ID_class IDENT PUNC_CURLY_OPEN ID_async IDENT
       PUNC_PAREN_OPEN PUNC_PAREN_CLOSE PUNC_CURLY_OPEN ID_return
       ID_await IDENT PUNC_SEMI PUNC_CURLY_CLOSE PUNC_CURLY_CLOSE
       PUNC_CURLY_CLOSE
`````

### Strict mode

Parsed with script goal but as if it was starting with `"use strict"` at the top.

_Output same as sloppy mode._

### Module goal

Parsed with the module goal.

_Output same as sloppy mode._

### Sloppy mode with AnnexB

Parsed with script goal with AnnexB rules enabled and as if the code did not start with strict mode header.

_Output same as sloppy mode._

### Module goal with AnnexB

Parsed with the module goal with AnnexB rules enabled.

_Output same as sloppy mode._

## AST Printer

Printer output different from input [sloppy][annexb:no]:

````js
function* as() {class A{async f(){return await foo;};}}
````

Produces same AST
